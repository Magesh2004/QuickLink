<%- layout('layout/home') %>
    <% if(category){ %>
        <button class="btn btn-secondary m-3" ><%= category %></button>
        <%}else{%>
        <button class="btn btn-secondary m-3" >All</button>
        <% } %>
    <ul class="list-group mt-3" id="linkList">
        <% for(let i of Link) { %> 
            <li class="list-group-item d-flex justify-content-between align-items-center bg-light border rounded shadow-sm p-3">
                <div>
                    <h5 class="mb-1 text-primary">
                        <%= i.title %>
                    </h5>
                    <small class="text-muted">
                        <i class="bi bi-tag-fill"></i> Category: <%= i.category %>
                    </small>
                </div>
                <div>
                    <!-- View Button -->
                    <a href="<%= i.link %>" class="btn btn-outline-primary btn-sm" target="_blank">
                        <i class="bi bi-link-45deg"></i> View
                    </a>
                    <% if(currentUser.isAdmin) {%>
                    <!-- Edit Button -->
                    <a href="link/<%= i._id %>/edit" class="btn btn-outline-warning btn-sm">
                        <i class="bi bi-pencil-square"></i> Edit
                    </a>
    
                    <!-- Delete Button -->
                    <form action="link/<%= i._id %>?_method=DELETE" method="POST" class="d-inline">
                        <button type="submit" class="btn btn-outline-danger btn-sm" >
                            <i class="bi bi-trash-fill"></i> Delete
                        </button>
                    </form>
                    <% } %>
                </div>
            </li>      
        <% } %>
    </ul>   
    <% if (currentPage && totalPages > 1) { %>
  <nav aria-label="Page navigation" class="mt-4">
    <ul class="pagination justify-content-center">
      <% if (currentPage > 1) { %>
        <li class="page-item">
          <a class="page-link" href="?<% if(category){ %>category=<%= encodeURIComponent(category) %>&<% } %>page=<%= currentPage - 1 %>">Previous</a>
        </li>
      <% } %>

      <% for(let i = 1; i <= totalPages; i++) { %>
        <li class="page-item <%= i === currentPage ? 'active' : '' %>">
          <a class="page-link" href="?<% if(category){ %>category=<%= encodeURIComponent(category) %>&<% } %>page=<%= i %>"><%= i %></a>
        </li>
      <% } %>

      <% if (currentPage < totalPages) { %>
        <li class="page-item">
          <a class="page-link" href="?<% if(category){ %>category=<%= encodeURIComponent(category) %>&<% } %>page=<%= currentPage + 1 %>">Next</a>
        </li>
      <% } %>
    </ul>
  </nav>
<% } %>
